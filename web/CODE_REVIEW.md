# üîç –†–µ–≤—å—é –∫–æ–¥–∞ UTMka Web Service

**–î–∞—Ç–∞:** 19.01.2026  
**–í–µ—Ä—Å–∏—è:** –ò—Ç–µ—Ä–∞—Ü–∏—è 10  
**–°—Ç–∞—Ç—É—Å:** –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–∞–≥—Ñ–∏–∫—Å—ã

---

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ú–æ–¥–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ –≤–∏—Å—è—Ç –Ω–∞ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
**–ü—Ä–æ–±–ª–µ–º–∞:** –≠–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –æ—Å—Ç–∞–≤–∞–ª—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ –¥—Ä—É–≥–∏–µ –≤–∫–ª–∞–¥–∫–∏.

**–†–µ—à–µ–Ω–∏–µ:**
```javascript
function switchView(targetId) {
    // –í–°–ï–ì–î–ê —É–¥–∞–ª—è–µ–º —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤–∫–ª–∞–¥–æ–∫
    const authScreen = document.getElementById('auth-required-screen');
    if (authScreen) {
        authScreen.remove();
    }
    // ...
}
```

### 2. UI –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞:** –ö–Ω–æ–ø–∫–∏ "–í–æ–π—Ç–∏"/"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" –Ω–µ –∏—Å—á–µ–∑–∞–ª–∏, email –∏ –±–µ–π–¥–∂ –Ω–µ –ø–æ—è–≤–ª—è–ª–∏—Å—å.

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `register()` –≤ `auth.js` ‚Äî —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–∫–µ–Ω—ã
- –£–ª—É—á—à–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `updateAuthUI()` ‚Äî –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ DOM
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### 3. –ë–µ–π–¥–∂ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø–æ–¥–ø–∏—Å–∫–∏ (Free/Trial/Pro)

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Backend (Python/Flask)

```
web/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py          ‚úÖ Flask app factory
‚îÇ   ‚îú‚îÄ‚îÄ config.py            ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ env
‚îÇ   ‚îú‚îÄ‚îÄ extensions.py        ‚úÖ SQLAlchemy, JWT, Migrate
‚îÇ   ‚îú‚îÄ‚îÄ models/              ‚úÖ 6 –º–æ–¥–µ–ª–µ–π (User, OAuth, Subscription, History, Template, Payment)
‚îÇ   ‚îú‚îÄ‚îÄ routes/              ‚úÖ 3 blueprints (auth, utm, main)
‚îÇ   ‚îú‚îÄ‚îÄ services/            ‚úÖ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (auth, oauth)
‚îÇ   ‚îî‚îÄ‚îÄ utils/               ‚úÖ –î–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã (@subscription_required)
‚îú‚îÄ‚îÄ migrations/              ‚úÖ Alembic –º–∏–≥—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ run.py                   ‚úÖ –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
```

### Frontend

```
web/app/
‚îú‚îÄ‚îÄ templates/
‚îÇ   ‚îî‚îÄ‚îÄ index.html           ‚ö†Ô∏è –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª (4054 —Å—Ç—Ä–æ–∫–∏)
‚îî‚îÄ‚îÄ static/
    ‚îî‚îÄ‚îÄ js/
        ‚îî‚îÄ‚îÄ auth.js          ‚úÖ –ú–æ–¥—É–ª—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ú–æ–Ω–æ–ª–∏—Ç–Ω—ã–π index.html (4054 —Å—Ç—Ä–æ–∫–∏)
**–ü—Ä–æ–±–ª–µ–º–∞:** –í–µ—Å—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ ‚Äî —Å–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
- –†–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏ (generator.js, history.js, templates.js)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–±–æ—Ä—â–∏–∫ (Webpack/Vite) –¥–ª—è production
- –í—ã–Ω–µ—Å—Ç–∏ —Å—Ç–∏–ª–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π CSS —Ñ–∞–π–ª

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π (–º–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å –¥–æ production)

---

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

#### ‚úÖ –•–æ—Ä–æ—à–æ:
- –ü–∞—Ä–æ–ª–∏ —Ö–µ—à–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ bcrypt
- JWT —Ç–æ–∫–µ–Ω—ã —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
- CSRF –∑–∞—â–∏—Ç–∞ –¥–ª—è OAuth (state —Ç–æ–∫–µ–Ω)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ Marshmallow

#### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:
- **JWT_COOKIE_CSRF_PROTECT = True**, –Ω–æ —Ç–æ–∫–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ localStorage (–Ω–µ cookies)
- –ù–µ—Ç rate limiting (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å Flask-Limiter)
- –ù–µ—Ç –∑–∞—â–∏—Ç—ã –æ—Ç XSS (–Ω—É–∂–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥)
- SQL injection –∑–∞—â–∏—â—ë–Ω —á–µ—Ä–µ–∑ SQLAlchemy (ORM)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
```python
# –î–æ–±–∞–≤–∏—Ç—å rate limiting
from flask_limiter import Limiter
from flask_limiter.util import get_remote_address

limiter = Limiter(
    app,
    key_func=get_remote_address,
    default_limits=["200 per day", "50 per hour"]
)

@auth_bp.route('/login', methods=['POST'])
@limiter.limit("5 per minute")
def login():
    # ...
```

### 2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

#### ‚úÖ –•–æ—Ä–æ—à–æ:
- Try-catch –±–ª–æ–∫–∏ –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Å—Ç–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ `current_app.logger`
- –í–æ–∑–≤—Ä–∞—Ç –ø–æ–Ω—è—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

#### ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
- –ï–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ API
- –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ (error handlers)
- Sentry –¥–ª—è production –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```python
@app.errorhandler(500)
def internal_error(error):
    db.session.rollback()
    return jsonify({'error': 'Internal server error'}), 500
```

### 3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### ‚úÖ –•–æ—Ä–æ—à–æ:
- –ò–Ω–¥–µ–∫—Å—ã –≤ –ë–î –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- SQLAlchemy lazy loading

#### ‚ö†Ô∏è –ú–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (Redis –¥–ª—è —Å–µ—Å—Å–∏–π –∏ —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è N+1 –∑–∞–ø—Ä–æ—Å–æ–≤ (eager loading)
- Gzip —Å–∂–∞—Ç–∏–µ –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:**
```python
from flask_caching import Cache

cache = Cache(app, config={'CACHE_TYPE': 'redis'})

@cache.cached(timeout=300)
def get_subscription_plans():
    # ...
```

---

## üü° –°—Ä–µ–¥–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Ö–æ–∂–∏–π –∫–æ–¥ –≤ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞—Ö (yandex.py, vk.py, google.py)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å:
```python
class BaseOAuth:
    def __init__(self, client_id, client_secret, redirect_uri):
        self.client_id = client_id
        self.client_secret = client_secret
        self.redirect_uri = redirect_uri
    
    def get_authorize_url(self, state):
        # –û–±—â–∞—è –ª–æ–≥–∏–∫–∞
        pass
```

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –Ω–∞ backend, –Ω–µ—Ç –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π:
```javascript
function validateEmail(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}
```

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Ç unit/integration —Ç–µ—Å—Ç–æ–≤

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å pytest —Ç–µ—Å—Ç—ã:
```python
def test_register(client):
    response = client.post('/auth/register', json={
        'email': 'test@example.com',
        'password': 'password123'
    })
    assert response.status_code == 201
```

---

## üü¢ –ú–µ–ª–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∫–æ–¥–∞
- ‚úÖ Docstrings –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö
- ‚ö†Ô∏è –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å type hints

**–ü—Ä–∏–º–µ—Ä:**
```python
def get_history(user_id: int, page: int = 1) -> dict:
    # ...
```

### 2. –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã
- –í—ã–Ω–µ—Å—Ç–∏ –º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞ –≤ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã:
```python
MAX_HISTORY_PER_PAGE = 100
TRIAL_DAYS = 7
```

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã—Ö –ª–æ–≥–æ–≤:
```python
current_app.logger.info(f'User {user_id} created history item {item_id}')
```

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–¥–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|---------|----------|--------|
| Backend —Ñ–∞–π–ª–æ–≤ | 15+ | ‚úÖ |
| Frontend —Ñ–∞–π–ª–æ–≤ | 2 (1 –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π) | ‚ö†Ô∏è |
| –ú–æ–¥–µ–ª–µ–π –ë–î | 6 | ‚úÖ |
| API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ | 16+ | ‚úÖ |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (backend) | ~2000 | ‚úÖ |
| –°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (frontend) | ~4000 | ‚ö†Ô∏è |
| –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ | 0% | ‚ùå |

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Å–¥–µ–ª–∞—Ç—å —Å–µ–π—á–∞—Å)
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω—ã–µ –±–ª–æ–∫–∏ ‚Äî **–ò–°–ü–†–ê–í–õ–ï–ù–û**
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI ‚Äî **–ò–°–ü–†–ê–í–õ–ï–ù–û**
3. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞
4. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ 500/404

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Å–ª–µ–¥—É—é—â–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è)
1. –†–∞–∑–±–∏—Ç—å index.html –Ω–∞ –º–æ–¥—É–ª–∏
2. –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
3. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è OAuth
4. –î–æ–±–∞–≤–∏—Ç—å unit —Ç–µ—Å—Ç—ã

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (production)
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
2. –î–æ–±–∞–≤–∏—Ç—å Sentry –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î
4. –î–æ–±–∞–≤–∏—Ç—å CI/CD pipeline

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ models/routes/services
2. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π, JWT, –≤–∞–ª–∏–¥–∞—Ü–∏—è
3. **API:** RESTful —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ø–æ–Ω—è—Ç–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
4. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã, relationships
5. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –•–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ docs/

---

## üîß –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –î–æ–±–∞–≤–∏—Ç—å rate limiting
```bash
pip install flask-limiter
```

```python
# –í extensions.py
from flask_limiter import Limiter
limiter = Limiter(app, key_func=get_remote_address)

# –í routes/auth.py
@auth_bp.route('/login', methods=['POST'])
@limiter.limit("5 per minute")
def login():
    # ...
```

### 2. –ì–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
```python
# –í __init__.py
@app.errorhandler(404)
def not_found(error):
    return jsonify({'error': 'Not found'}), 404

@app.errorhandler(500)
def internal_error(error):
    db.session.rollback()
    return jsonify({'error': 'Internal server error'}), 500
```

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
```python
# –í routes/utm.py
current_app.logger.info(f'User {user_id} created history item {item_id}')
current_app.logger.warning(f'User {user_id} tried to access without subscription')
```

---

## üìù –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-----------|--------|-------------|
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | ‚≠ê‚≠ê‚≠ê‚≠ê | –•–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê | –•–æ—Ä–æ—à–æ, –Ω–æ –Ω—É–∂–µ–Ω rate limiting |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ‚≠ê‚≠ê‚≠ê | –ù–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è MVP, –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å |
| –ö–æ–¥ –∫–∞—á–µ—Å—Ç–≤–æ | ‚≠ê‚≠ê‚≠ê | –ß–∏—Ç–∞–µ–º—ã–π –∫–æ–¥, –Ω–æ –Ω—É–∂–Ω—ã —Ç–µ—Å—Ç—ã |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | ‚≠ê‚≠ê‚≠ê‚≠ê | –û—Ç–ª–∏—á–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è |
| Frontend | ‚≠ê‚≠ê‚≠ê | –†–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π —Ñ–∞–π–ª |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** ‚≠ê‚≠ê‚≠ê‚≠ê (4/5)

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ ‚Äî **–°–î–ï–õ–ê–ù–û**
2. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å rate limiting
3. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
4. ‚è≥ –ù–∞–ø–∏—Å–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
5. ‚è≥ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫ production (Docker, CI/CD)

---

**–°—Ç–∞—Ç—É—Å —Ä–µ–≤—å—é:** –ó–∞–≤–µ—Ä—à–µ–Ω–æ ‚úÖ  
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ‚úÖ  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production:** 70% ‚ö†Ô∏è
